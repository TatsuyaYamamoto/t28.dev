---
import { css } from "../../../styled-system/css";

import { getCollection } from "astro:content";

import AchievementSection from "../../components/s-works/AchievementSection";
import FooterSection from "../../components/s-works/SWorksFooterSection";
import IndexHero from "../../components/s-works/IndexHero";
import BaseLayout from "../../layouts/BaseLayout.astro";
import { SITE_TITLE_S_WORKS, SITE_DESCRIPTION_S_WORKS } from "../../constants";

const allPosts = await getCollection("s-works-achievement");
const posts = allPosts
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .map((post) => ({
    url: `/s-works/achievement/${post.slug}/`,
    title: post.data.title,
    description: post.data.description ?? /* WIP */ post.body.slice(0, 100),
    date: post.data.date,
    heroImage: post.data.heroImage,
  }));

const hero = css({
  display: "flex",
  justifyContent: "center",
  alignItems: "center",
  minHeight: "full",
  borderStyle: "solid",
  borderWidth: "15px",
  borderColor: "var(--color-s-works)",
  boxSizing: "border-box",
});
---

<BaseLayout
  title={SITE_TITLE_S_WORKS}
  description={SITE_DESCRIPTION_S_WORKS}
  faviconType="s-works"
>
  <section class={hero}>
    <IndexHero />
  </section>
  <AchievementSection posts={posts} />
  <FooterSection />
</BaseLayout>

<style>
  html,
  body {
    height: 100%;
  }
</style>

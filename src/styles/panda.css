@layer reset, base, theme, base, tokens, recipes, components,utilities;

@import "tailwindcss";

/* https://panda-css.com/docs/installation/astro#configure-the-entry-css-with-layers */
@layer reset, base, tokens, recipes, utilities;

@import "modern-css-reset/src/reset.css" layer(reset);

/* https://tailwindcss.com/docs/animation#customizing-your-theme */
@theme {
  --animate-s-works-surface: sWorksSurface 800ms ease-out both;

  --lineHeight-none: 1;
  --lineHeight-tight: 1.1;
  --lineHeight-normal: 1.5;
  --lineHeight-relaxed: 1.7; /* original value -> 1.625 */
  /* 1.200 Minor Third Type Scale */
  --fontSize-0: 0.833rem;
  --fontSize-1: 1rem;
  --fontSize-2: 1.2rem;
  --fontSize-3: 1.44rem;
  --fontSize-4: 1.728rem;
  --fontSize-5: 2.074rem;
  --fontSize-6: 2.488rem;
  --fontSize-7: 2.986rem;

  --font-family-s-works: helvetica;

  --border-solid-accent: 1px solid var(--color-accent);
  --border-solid-transparent: 1px solid transparent;

  --color-primary: #005b99;
  --color-primary-light: #0a95ef;
  --color-text: #2e353f;
  --color-text-light: #4f5969;
  --color-heading: #1a202c;
  --color-heading-black: black;
  --color-accent: #d1dce5;
  --color-accent-soft: #e7ecef;
  --color-post-background: #fcfcfc;

  --color-black: #000000;
  --colors-white: #ffffff;

  --color-s-works: #ffc69e;
  --color-twitter: #1da1f2;
  --color-github: #000000;
}

@layer theme {
  :root {
    --spacing: 0.25rem;
    --lineHeight-relaxed: 1.7;
    --fontSize-0: 0.833rem;
    --colors-gray-400: #9ca3af;
    --colors-neutral-100: #f5f5f5;
  }
}

@layer base {
  @keyframes sWorksSurface {
    0% {
      fill: #fff3e0;
      filter: none;
    }

    100% {
      fill: #ffc69e;
      filter: drop-shadow(-3px -3px 5px rgba(255, 255, 255, 0.3))
        drop-shadow(1px 2px 1px rgba(160, 160, 160, 0.3))
        drop-shadow(3px 4px 2px rgba(160, 160, 160, 0.2))
        drop-shadow(4px 6px 3px rgba(160, 160, 160, 0.2))
        drop-shadow(5px 8px 4px rgba(160, 160, 160, 0.1))
        drop-shadow(6px 10px 5px rgba(160, 160, 160, 0.1));
    }
  }

  html {
    line-height: var(--lineHeight-normal);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN",
      "Hiragino Sans", Meiryo, sans-serif;
    font-size: var(--fontSize-1);
    color: var(--color-text);
    background-color: rgba(242, 242, 248, 0.5);
  }

  :is(h1, h2, h3, h4, h5, h6) {
    margin-top: calc(var(--spacing) * 12);
    margin-bottom: calc(var(--spacing) * 6);
    line-height: var(--lineHeight-tight);
    letter-spacing: -0.025em;
  }

  :is(h1, h2, h3, h4, h5, h6) > a {
    text-decoration: none;
    color: inherit;
  }

  :is(h1) {
    font-weight: var(--font-weight-black);
    font-size: var(--fontSize-6);
    color: var(--color-heading-black);
  }

  h2,
  h3,
  h4,
  h5,
  h6 {
    font-weight: bold;
    color: var(--color-heading);
  }

  h2 {
    font-size: var(--fontSize-5);
  }

  h3 {
    font-size: var(--fontSize-4);
  }

  h4 {
    font-size: var(--fontSize-3);
  }

  h5 {
    font-size: var(--fontSize-2);
  }

  h6 {
    font-size: var(--fontSize-1);
  }

  a {
    color: var(--color-primary);
    text-decoration-line: underline;
  }

  sup {
    font-size: smaller;
    vertical-align: super;
    position: inherit;
    line-height: inherit;
  }

  ol,
  ul,
  menu {
    list-style: auto;
  }

  code {
    font-family: monospace;
  }

  /* markdown 内の img 要素 の aspect ratio 画像のものと同じにするために設定する */
  img {
    height: auto;
  }
}

@layer components {
  .blog-post-content {
    /*********************************************************************************************************************
         * Headings
         */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      font-weight: var(--font-weight-semibold);
    }

    h1 {
      font-size: var(--fontSize-5);
    }

    h2 {
      font-size: var(--fontSize-4);
    }

    h3 {
      font-size: var(--fontSize-3);
    }

    h4 {
      font-size: var(--fontSize-2);
    }

    /*********************************************************************************************************************
         * Link
         */

    a {
      color: var(--color-primary);
      font-weight: 500; /* var(--font-weight-medium);*/
      text-underline-offset: 2px;
      word-break: break-all;

      // リンクは既定の改行規則を無効にする

        &:hover {
        color: var(--color-primary-light);
      }
    }

    /*********************************************************************************************************************
         * Table
         */

    table {
      width: 100%;
      margin: calc(var(--spacing) * 4) 0;

      border-collapse: separate;
      border-spacing: 0;
      border: 1px solid var(--color-accent);
      border-radius: calc(var(--spacing) * 2);
      overflow: hidden;

      th,
      td {
        font-size: var(--fontSize-0);
        padding: calc(var(--spacing) * 3) calc(var(--spacing) * 4);
      }

      th {
        font-weight: var(--font-weight-semibold);
        background-color: var(--color-accent-soft);
      }

      /* 横方向の境界線 */
      td {
        border-top: 1px solid var(--color-accent);
      }

      /* 縦方向の境界線 */
      td,
      th {
        &:not(:last-child) {
          border-right: 1px solid var(--color-accent);
        }
      }
    }

    /*********************************************************************************************************************
         * Decoration
         */
    hr {
      background: var(--color-accent);
      height: 1px;
      border: 0;
      margin: calc(var(--spacing) * 10) 0;
    }

    /*********************************************************************************************************************
         * Paragraph
         */
    p {
      line-height: var(--lineHeight-relaxed);
      margin: calc(var(--spacing) * 4) 0;
    }

    blockquote {
      margin: calc(var(--spacing) * 4) 0;
      border-left: 2px solid var(--color-accent);
      padding-left: calc(var(--spacing) * 4);

      & p {
        margin: 0;
        color: var(--color-text-light);
      }
    }

    /*********************************************************************************************************************
        * List
        */
    ul,
    ol {
      padding-left: 1.25rem;
      margin: calc(var(--spacing) * 4) 0;
    }

    li {
      /* リストアイテム間の幅 */
      & + li {
        margin-top: calc(var(--spacing) * 2);
      }

      & > ol,
      & > ul {
        margin-top: calc(var(--spacing) * 2);
      }
    }

    /*********************************************************************************************************************
         * Code
         */

    /* inline */
    code {
      font-size: 0.9em;
    }

    :not(pre) > code {
      padding: 3px 6px;
      color: var(--color-primary);
      border-radius: 4px;
      background-color: #e7e7e7;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      & > code {
        /* 見出しは色を変えない */
        color: inherit;
      }
    }

    /* in code block */
    pre {
      border-radius: 8px;
      background-color: #e7e7e7 !important;
      padding: calc(var(--spacing) * 5) calc(var(--spacing) * 6);
    }
  }

  .blog-post-toc {
    font-size: var(--fontSize-0);

    & > ul {
      margin-block-start: 1em;
      margin-block-end: 1em;
      padding-left: 0;
    }

    & li {
      position: relative;
      list-style-type: none;

      & > ul {
        padding-left: calc(var(--spacing) * 4);
      }
    }

    & a {
      text-decoration: none;
      color: var(--colors-gray-400);

      &[data-toc-active] {
        color: var(--color-text);
      }
    }
  }

  .s-works-achievement-post {
    & a {
      @apply font-semibold underline;
      color: var(--color-orange-400);
    }

    & p {
      @apply mb-8;
    }

    & img {
      @apply h-auto shadow-md;
    }
  }
}
